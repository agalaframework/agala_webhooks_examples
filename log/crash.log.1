2018-07-07 00:07:54 =SUPERVISOR REPORT====
     Supervisor: {local,'Elixir.Logger.Supervisor'}
     Context:    child_terminated
     Reason:     normal
     Offender:   [{pid,<0.284.0>},{id,'Elixir.Logger.ErrorHandler'},{mfargs,{'Elixir.Logger.Watcher',start_link,[{error_logger,'Elixir.Logger.ErrorHandler',{true,false,500}}]}},{restart_type,permanent},{shutdown,5000},{child_type,worker}]

2018-07-07 00:08:16 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.464.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.UndefinedFunctionError',arity => 1,exports => nil,function => call,module => 'Elixir.Awe.Chains.Fb',reason => nil},[{'Elixir.Awe.Chains.Fb',call,[#{'__struct__' => 'Elixir.Agala.Conn',assigns => #{},fallback => nil,halted => false,multi => nil,private => #{},request => <<"{\"entry\": [{\"changes\": [{\"field\": \"messages\", \"value\": {\"page_id\": \"1067280970047460\"}}], \"id\": \"0\", \"time\": 1530911292}], \"object\": \"page\"}">>,request_bot_params => #{'__struct__' => 'Elixir.Agala.BotParams',common => #{},handler => nil,name => nil,otp_app => nil,private => #{},provider => nil,provider_params => #{}},response => nil,responser_name => nil}],[]},{'Elixir.Agala.Provider.Facebook.Controllers.Callback',handle,1,[{file,"lib/receive/controllers/callback.ex"},{line,10}]},{'Elixir.Agala.Provider.Facebook.Plug',plug_builder_call,2,[{file,"lib/receive/plug.ex"},{line,1}]},{'Elixir.Awe.Bots.Fb',plug_builder_call,2,[{file,"lib/bots/fb.ex"},{line,1}]},{'Elixir.Plug.Router.Utils',forward,4,[{file,"lib/plug/router/utils.ex"},{line,92}]},{'Elixir.Awe.Router',plug_builder_call,2,[{file,"lib/router.ex"},{line,1}]},{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,12}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]}]},{'Elixir.Awe.Router',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 140,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"connection">> => <<"close">>,<<"content-length">> => <<"140">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"Webhooks/1.0 (https://fb.me/webhooks)">>,<<"x-forwarded-for">> => <<"2a03:2880:2120:1feb:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=9414f01a6d151c6a7bf715eebc6d8afa692d07d5">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63745},pid => <0.463.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.464.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"fb">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"connection">>,<<"close">>},{<<"content-length">>,<<"140">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"Webhooks/1.0 (https://fb.me/webhooks)">>},{<<"x-forwarded-for">>,<<"2a03:2880:2120:1feb:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=9414f01a6d151c6a7bf715eebc6d8afa692d07d5">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.463.0>,<0.359.0>,<0.358.0>,<0.357.0>,<0.356.0>]
    message_queue_len: 0
    messages: []
    links: [<0.463.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 898
  neighbours:
2018-07-07 00:08:16 =ERROR REPORT====
Ranch listener 'Elixir.Awe.Router.HTTP', connection process <0.463.0>, stream 1 had its request process <0.464.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.UndefinedFunctionError',arity => 1,exports => nil,function => call,module => 'Elixir.Awe.Chains.Fb',reason => nil},[{'Elixir.Awe.Chains.Fb',call,[#{'__struct__' => 'Elixir.Agala.Conn',assigns => #{},fallback => nil,halted => false,multi => nil,private => #{},request => <<"{\"entry\": [{\"changes\": [{\"field\": \"messages\", \"value\": {\"page_id\": \"1067280970047460\"}}], \"id\": \"0\", \"time\": 1530911292}], \"object\": \"page\"}">>,request_bot_params => #{'__struct__' => 'Elixir.Agala.BotParams',common => #{},handler => nil,name => nil,otp_app => nil,private => #{},provider => nil,provider_params => #{}},response => nil,responser_name => nil}],[]},{'Elixir.Agala.Provider.Facebook.Controllers.Callback',handle,1,[{file,"lib/receive/controllers/callback.ex"},{line,10}]},{'Elixir.Agala.Provider.Facebook.Plug',plug_builder_call,2,[{file,"lib/receive/plug.ex"},{line,1}]},{'Elixir.Awe.Bots.Fb',plug_builder_call,2,[{file,"lib/bots/fb.ex"},{line,1}]},{'Elixir.Plug.Router.Utils',forward,4,[{file,"lib/plug/router/utils.ex"},{line,92}]},{'Elixir.Awe.Router',plug_builder_call,2,[{file,"lib/router.ex"},{line,1}]},{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,12}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]}]},{'Elixir.Awe.Router',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 140,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"connection">> => <<"close">>,<<"content-length">> => <<"140">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"Webhooks/1.0 (https://fb.me/webhooks)">>,<<"x-forwarded-for">> => <<"2a03:2880:2120:1feb:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=9414f01a6d151c6a7bf715eebc6d8afa692d07d5">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63745},pid => <0.463.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.464.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"fb">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"connection">>,<<"close">>},{<<"content-length">>,<<"140">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"Webhooks/1.0 (https://fb.me/webhooks)">>},{<<"x-forwarded-for">>,<<"2a03:2880:2120:1feb:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=9414f01a6d151c6a7bf715eebc6d8afa692d07d5">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]
2018-07-07 00:08:52 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.468.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.UndefinedFunctionError',arity => 1,exports => nil,function => call,module => 'Elixir.Awe.Chains.Fb',reason => nil},[{'Elixir.Awe.Chains.Fb',call,[#{'__struct__' => 'Elixir.Agala.Conn',assigns => #{},fallback => nil,halted => false,multi => nil,private => #{},request => <<"{\"entry\": [{\"changes\": [{\"field\": \"messages\", \"value\": {\"page_id\": \"1067280970047460\"}}], \"id\": \"0\", \"time\": 1530911292}], \"object\": \"page\"}">>,request_bot_params => #{'__struct__' => 'Elixir.Agala.BotParams',common => #{},handler => nil,name => nil,otp_app => nil,private => #{},provider => nil,provider_params => #{}},response => nil,responser_name => nil}],[]},{'Elixir.Agala.Provider.Facebook.Controllers.Callback',handle,1,[{file,"lib/receive/controllers/callback.ex"},{line,10}]},{'Elixir.Agala.Provider.Facebook.Plug',plug_builder_call,2,[{file,"lib/receive/plug.ex"},{line,1}]},{'Elixir.Awe.Bots.Fb',plug_builder_call,2,[{file,"lib/bots/fb.ex"},{line,1}]},{'Elixir.Plug.Router.Utils',forward,4,[{file,"lib/plug/router/utils.ex"},{line,92}]},{'Elixir.Awe.Router',plug_builder_call,2,[{file,"lib/router.ex"},{line,1}]},{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,12}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]}]},{'Elixir.Awe.Router',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 140,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"connection">> => <<"close">>,<<"content-length">> => <<"140">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"Webhooks/1.0 (https://fb.me/webhooks)">>,<<"x-forwarded-for">> => <<"2a03:2880:1030:afc1:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=9414f01a6d151c6a7bf715eebc6d8afa692d07d5">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63749},pid => <0.467.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.468.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"fb">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"connection">>,<<"close">>},{<<"content-length">>,<<"140">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"Webhooks/1.0 (https://fb.me/webhooks)">>},{<<"x-forwarded-for">>,<<"2a03:2880:1030:afc1:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=9414f01a6d151c6a7bf715eebc6d8afa692d07d5">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.467.0>,<0.359.0>,<0.358.0>,<0.357.0>,<0.356.0>]
    message_queue_len: 0
    messages: []
    links: [<0.467.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 855
  neighbours:
2018-07-07 00:08:52 =ERROR REPORT====
Ranch listener 'Elixir.Awe.Router.HTTP', connection process <0.467.0>, stream 1 had its request process <0.468.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.UndefinedFunctionError',arity => 1,exports => nil,function => call,module => 'Elixir.Awe.Chains.Fb',reason => nil},[{'Elixir.Awe.Chains.Fb',call,[#{'__struct__' => 'Elixir.Agala.Conn',assigns => #{},fallback => nil,halted => false,multi => nil,private => #{},request => <<"{\"entry\": [{\"changes\": [{\"field\": \"messages\", \"value\": {\"page_id\": \"1067280970047460\"}}], \"id\": \"0\", \"time\": 1530911292}], \"object\": \"page\"}">>,request_bot_params => #{'__struct__' => 'Elixir.Agala.BotParams',common => #{},handler => nil,name => nil,otp_app => nil,private => #{},provider => nil,provider_params => #{}},response => nil,responser_name => nil}],[]},{'Elixir.Agala.Provider.Facebook.Controllers.Callback',handle,1,[{file,"lib/receive/controllers/callback.ex"},{line,10}]},{'Elixir.Agala.Provider.Facebook.Plug',plug_builder_call,2,[{file,"lib/receive/plug.ex"},{line,1}]},{'Elixir.Awe.Bots.Fb',plug_builder_call,2,[{file,"lib/bots/fb.ex"},{line,1}]},{'Elixir.Plug.Router.Utils',forward,4,[{file,"lib/plug/router/utils.ex"},{line,92}]},{'Elixir.Awe.Router',plug_builder_call,2,[{file,"lib/router.ex"},{line,1}]},{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,12}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]}]},{'Elixir.Awe.Router',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 140,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"connection">> => <<"close">>,<<"content-length">> => <<"140">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"Webhooks/1.0 (https://fb.me/webhooks)">>,<<"x-forwarded-for">> => <<"2a03:2880:1030:afc1:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=9414f01a6d151c6a7bf715eebc6d8afa692d07d5">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63749},pid => <0.467.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.468.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"fb">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"connection">>,<<"close">>},{<<"content-length">>,<<"140">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"Webhooks/1.0 (https://fb.me/webhooks)">>},{<<"x-forwarded-for">>,<<"2a03:2880:1030:afc1:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=9414f01a6d151c6a7bf715eebc6d8afa692d07d5">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]
2018-07-07 00:08:53 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.471.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.UndefinedFunctionError',arity => 1,exports => nil,function => call,module => 'Elixir.Awe.Chains.Fb',reason => nil},[{'Elixir.Awe.Chains.Fb',call,[#{'__struct__' => 'Elixir.Agala.Conn',assigns => #{},fallback => nil,halted => false,multi => nil,private => #{},request => <<"{\"object\":\"page\",\"entry\":[{\"id\":\"730671640616281\",\"time\":1530911333352,\"messaging\":[{\"sender\":{\"id\":\"1468676106567600\"},\"recipient\":{\"id\":\"730671640616281\"},\"timestamp\":1530893475743,\"message\":{\"mid\":\"J97v6JNgKj7-NqXX_Pk0lyGtUuP6avxR5IDQ578-0aIgPv-78yA8-aUUMk0jzhRwJvBGGBi-NxVStT_8FJdkcQ\",\"seq\":2532,\"text\":\"Hello!\"}}]}]}">>,request_bot_params => #{'__struct__' => 'Elixir.Agala.BotParams',common => #{},handler => nil,name => nil,otp_app => nil,private => #{},provider => nil,provider_params => #{}},response => nil,responser_name => nil}],[]},{'Elixir.Agala.Provider.Facebook.Controllers.Callback',handle,1,[{file,"lib/receive/controllers/callback.ex"},{line,10}]},{'Elixir.Agala.Provider.Facebook.Plug',plug_builder_call,2,[{file,"lib/receive/plug.ex"},{line,1}]},{'Elixir.Awe.Bots.Fb',plug_builder_call,2,[{file,"lib/bots/fb.ex"},{line,1}]},{'Elixir.Plug.Router.Utils',forward,4,[{file,"lib/plug/router/utils.ex"},{line,92}]},{'Elixir.Awe.Router',plug_builder_call,2,[{file,"lib/router.ex"},{line,1}]},{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,12}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]}]},{'Elixir.Awe.Router',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 321,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"deflate, gzip">>,<<"content-length">> => <<"321">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"facebookexternalua">>,<<"x-forwarded-for">> => <<"2a03:2880:1011:6fd4:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=d831d717021709bbb1e3ab04487327f0bccdecd8">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63750},pid => <0.470.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.471.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"fb">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"deflate, gzip">>},{<<"content-length">>,<<"321">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"facebookexternalua">>},{<<"x-forwarded-for">>,<<"2a03:2880:1011:6fd4:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=d831d717021709bbb1e3ab04487327f0bccdecd8">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.470.0>,<0.359.0>,<0.358.0>,<0.357.0>,<0.356.0>]
    message_queue_len: 0
    messages: []
    links: [<0.470.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 895
  neighbours:
2018-07-07 00:08:53 =ERROR REPORT====
Ranch listener 'Elixir.Awe.Router.HTTP', connection process <0.470.0>, stream 1 had its request process <0.471.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.UndefinedFunctionError',arity => 1,exports => nil,function => call,module => 'Elixir.Awe.Chains.Fb',reason => nil},[{'Elixir.Awe.Chains.Fb',call,[#{'__struct__' => 'Elixir.Agala.Conn',assigns => #{},fallback => nil,halted => false,multi => nil,private => #{},request => <<"{\"object\":\"page\",\"entry\":[{\"id\":\"730671640616281\",\"time\":1530911333352,\"messaging\":[{\"sender\":{\"id\":\"1468676106567600\"},\"recipient\":{\"id\":\"730671640616281\"},\"timestamp\":1530893475743,\"message\":{\"mid\":\"J97v6JNgKj7-NqXX_Pk0lyGtUuP6avxR5IDQ578-0aIgPv-78yA8-aUUMk0jzhRwJvBGGBi-NxVStT_8FJdkcQ\",\"seq\":2532,\"text\":\"Hello!\"}}]}]}">>,request_bot_params => #{'__struct__' => 'Elixir.Agala.BotParams',common => #{},handler => nil,name => nil,otp_app => nil,private => #{},provider => nil,provider_params => #{}},response => nil,responser_name => nil}],[]},{'Elixir.Agala.Provider.Facebook.Controllers.Callback',handle,1,[{file,"lib/receive/controllers/callback.ex"},{line,10}]},{'Elixir.Agala.Provider.Facebook.Plug',plug_builder_call,2,[{file,"lib/receive/plug.ex"},{line,1}]},{'Elixir.Awe.Bots.Fb',plug_builder_call,2,[{file,"lib/bots/fb.ex"},{line,1}]},{'Elixir.Plug.Router.Utils',forward,4,[{file,"lib/plug/router/utils.ex"},{line,92}]},{'Elixir.Awe.Router',plug_builder_call,2,[{file,"lib/router.ex"},{line,1}]},{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,12}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]}]},{'Elixir.Awe.Router',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 321,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"deflate, gzip">>,<<"content-length">> => <<"321">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"facebookexternalua">>,<<"x-forwarded-for">> => <<"2a03:2880:1011:6fd4:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=d831d717021709bbb1e3ab04487327f0bccdecd8">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63750},pid => <0.470.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.471.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"fb">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"deflate, gzip">>},{<<"content-length">>,<<"321">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"facebookexternalua">>},{<<"x-forwarded-for">>,<<"2a03:2880:1011:6fd4:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=d831d717021709bbb1e3ab04487327f0bccdecd8">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]
2018-07-07 00:09:45 =SUPERVISOR REPORT====
     Supervisor: {local,'Elixir.Logger.Supervisor'}
     Context:    child_terminated
     Reason:     normal
     Offender:   [{pid,<0.273.0>},{id,'Elixir.Logger.ErrorHandler'},{mfargs,{'Elixir.Logger.Watcher',start_link,[{error_logger,'Elixir.Logger.ErrorHandler',{true,false,500}}]}},{restart_type,permanent},{shutdown,5000},{child_type,worker}]

2018-07-07 00:09:58 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.453.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.UndefinedFunctionError',arity => 2,exports => nil,function => response,module => 'Elixir.Agala.Provider.Facebook.Controllers.View',reason => nil},[{'Elixir.Agala.Provider.Facebook.Controllers.View',response,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 140,cert => undefined,has_body => true,has_read_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"connection">> => <<"close">>,<<"content-length">> => <<"140">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"Webhooks/1.0 (https://fb.me/webhooks)">>,<<"x-forwarded-for">> => <<"2a03:2880:1020:9fe4:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=9414f01a6d151c6a7bf715eebc6d8afa692d07d5">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63782},pid => <0.452.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.453.0>,params => #{<<"glob">> => []},path_info => [],path_params => #{<<"glob">> => []},port => 80,private => #{agala_bot_config => #{bot => 'Elixir.Awe.Bots.Fb',chain => 'Elixir.Awe.Chains.Fb',otp_app => awe,provider => 'Elixir.Agala.Provider.Facebook',provider_params => #{app_secret => <<"c986ee78f5794c7fcbc77fb98cd429a0">>,page_access_token => <<"EAADSyqlomHgBANcck3bzhk1KBQ0RQYUTkZA2P5XiU8Qi3WiLEQ2HZBJPQZCmpM2nc8EjipppYh8ICsxXlLhydlsfbCSTFzd94XBXgjgjPaiVk2MyTmepeMVMGtK1oPUFIjwsEzEjw3MR8VOtvfBAyHOEIZCZC1VY30zQZC4G0z1kQQ3ZBZCBZBTzS">>,verify_token => <<"111">>}},body => <<"{\"entry\": [{\"changes\": [{\"field\": \"messages\", \"value\": {\"page_id\": \"1067280970047460\"}}], \"id\": \"0\", \"time\": 1530911292}], \"object\": \"page\"}">>,plug_route => {<<"/fb/*glob/*_path">>,#Fun<Elixir.Agala.Provider.Facebook.Plug.1.707427>}},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"connection">>,<<"close">>},{<<"content-length">>,<<"140">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"Webhooks/1.0 (https://fb.me/webhooks)">>},{<<"x-forwarded-for">>,<<"2a03:2880:1020:9fe4:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=9414f01a6d151c6a7bf715eebc6d8afa692d07d5">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [<<"fb">>],secret_key_base => nil,state => unset,status => nil},ok],[]},{'Elixir.Agala.Provider.Facebook.Plug',plug_builder_call,2,[{file,"lib/receive/plug.ex"},{line,1}]},{'Elixir.Awe.Bots.Fb',plug_builder_call,2,[{file,"lib/bots/fb.ex"},{line,1}]},{'Elixir.Plug.Router.Utils',forward,4,[{file,"lib/plug/router/utils.ex"},{line,92}]},{'Elixir.Awe.Router',plug_builder_call,2,[{file,"lib/router.ex"},{line,1}]},{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,12}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]}]},{'Elixir.Awe.Router',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 140,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"connection">> => <<"close">>,<<"content-length">> => <<"140">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"Webhooks/1.0 (https://fb.me/webhooks)">>,<<"x-forwarded-for">> => <<"2a03:2880:1020:9fe4:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=9414f01a6d151c6a7bf715eebc6d8afa692d07d5">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63782},pid => <0.452.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.453.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"fb">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"connection">>,<<"close">>},{<<"content-length">>,<<"140">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"Webhooks/1.0 (https://fb.me/webhooks)">>},{<<"x-forwarded-for">>,<<"2a03:2880:1020:9fe4:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=9414f01a6d151c6a7bf715eebc6d8afa692d07d5">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.452.0>,<0.348.0>,<0.347.0>,<0.346.0>,<0.345.0>]
    message_queue_len: 0
    messages: []
    links: [<0.452.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 4558
  neighbours:
2018-07-07 00:09:58 =ERROR REPORT====
Ranch listener 'Elixir.Awe.Router.HTTP', connection process <0.452.0>, stream 1 had its request process <0.453.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.UndefinedFunctionError',arity => 2,exports => nil,function => response,module => 'Elixir.Agala.Provider.Facebook.Controllers.View',reason => nil},[{'Elixir.Agala.Provider.Facebook.Controllers.View',response,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 140,cert => undefined,has_body => true,has_read_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"connection">> => <<"close">>,<<"content-length">> => <<"140">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"Webhooks/1.0 (https://fb.me/webhooks)">>,<<"x-forwarded-for">> => <<"2a03:2880:1020:9fe4:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=9414f01a6d151c6a7bf715eebc6d8afa692d07d5">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63782},pid => <0.452.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.453.0>,params => #{<<"glob">> => []},path_info => [],path_params => #{<<"glob">> => []},port => 80,private => #{agala_bot_config => #{bot => 'Elixir.Awe.Bots.Fb',chain => 'Elixir.Awe.Chains.Fb',otp_app => awe,provider => 'Elixir.Agala.Provider.Facebook',provider_params => #{app_secret => <<"c986ee78f5794c7fcbc77fb98cd429a0">>,page_access_token => <<"EAADSyqlomHgBANcck3bzhk1KBQ0RQYUTkZA2P5XiU8Qi3WiLEQ2HZBJPQZCmpM2nc8EjipppYh8ICsxXlLhydlsfbCSTFzd94XBXgjgjPaiVk2MyTmepeMVMGtK1oPUFIjwsEzEjw3MR8VOtvfBAyHOEIZCZC1VY30zQZC4G0z1kQQ3ZBZCBZBTzS">>,verify_token => <<"111">>}},body => <<"{\"entry\": [{\"changes\": [{\"field\": \"messages\", \"value\": {\"page_id\": \"1067280970047460\"}}], \"id\": \"0\", \"time\": 1530911292}], \"object\": \"page\"}">>,plug_route => {<<"/fb/*glob/*_path">>,#Fun<Elixir.Agala.Provider.Facebook.Plug.1.707427>}},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"connection">>,<<"close">>},{<<"content-length">>,<<"140">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"Webhooks/1.0 (https://fb.me/webhooks)">>},{<<"x-forwarded-for">>,<<"2a03:2880:1020:9fe4:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=9414f01a6d151c6a7bf715eebc6d8afa692d07d5">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [<<"fb">>],secret_key_base => nil,state => unset,status => nil},ok],[]},{'Elixir.Agala.Provider.Facebook.Plug',plug_builder_call,2,[{file,"lib/receive/plug.ex"},{line,1}]},{'Elixir.Awe.Bots.Fb',plug_builder_call,2,[{file,"lib/bots/fb.ex"},{line,1}]},{'Elixir.Plug.Router.Utils',forward,4,[{file,"lib/plug/router/utils.ex"},{line,92}]},{'Elixir.Awe.Router',plug_builder_call,2,[{file,"lib/router.ex"},{line,1}]},{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,12}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]}]},{'Elixir.Awe.Router',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 140,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"connection">> => <<"close">>,<<"content-length">> => <<"140">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"Webhooks/1.0 (https://fb.me/webhooks)">>,<<"x-forwarded-for">> => <<"2a03:2880:1020:9fe4:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=9414f01a6d151c6a7bf715eebc6d8afa692d07d5">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63782},pid => <0.452.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.453.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"fb">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"connection">>,<<"close">>},{<<"content-length">>,<<"140">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"Webhooks/1.0 (https://fb.me/webhooks)">>},{<<"x-forwarded-for">>,<<"2a03:2880:1020:9fe4:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=9414f01a6d151c6a7bf715eebc6d8afa692d07d5">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]
2018-07-07 00:10:05 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.458.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.UndefinedFunctionError',arity => 2,exports => nil,function => response,module => 'Elixir.Agala.Provider.Facebook.Controllers.View',reason => nil},[{'Elixir.Agala.Provider.Facebook.Controllers.View',response,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 140,cert => undefined,has_body => true,has_read_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"connection">> => <<"close">>,<<"content-length">> => <<"140">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"Webhooks/1.0 (https://fb.me/webhooks)">>,<<"x-forwarded-for">> => <<"2a03:2880:1011:2fc7:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=63feaee5a253f24b52970d5739b89e362c87ba50">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63785},pid => <0.457.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.458.0>,params => #{<<"glob">> => []},path_info => [],path_params => #{<<"glob">> => []},port => 80,private => #{agala_bot_config => #{bot => 'Elixir.Awe.Bots.Fb',chain => 'Elixir.Awe.Chains.Fb',otp_app => awe,provider => 'Elixir.Agala.Provider.Facebook',provider_params => #{app_secret => <<"c986ee78f5794c7fcbc77fb98cd429a0">>,page_access_token => <<"EAADSyqlomHgBANcck3bzhk1KBQ0RQYUTkZA2P5XiU8Qi3WiLEQ2HZBJPQZCmpM2nc8EjipppYh8ICsxXlLhydlsfbCSTFzd94XBXgjgjPaiVk2MyTmepeMVMGtK1oPUFIjwsEzEjw3MR8VOtvfBAyHOEIZCZC1VY30zQZC4G0z1kQQ3ZBZCBZBTzS">>,verify_token => <<"111">>}},body => <<"{\"entry\": [{\"changes\": [{\"field\": \"messages\", \"value\": {\"page_id\": \"1067280970047460\"}}], \"id\": \"0\", \"time\": 1530911402}], \"object\": \"page\"}">>,plug_route => {<<"/fb/*glob/*_path">>,#Fun<Elixir.Agala.Provider.Facebook.Plug.1.707427>}},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"connection">>,<<"close">>},{<<"content-length">>,<<"140">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"Webhooks/1.0 (https://fb.me/webhooks)">>},{<<"x-forwarded-for">>,<<"2a03:2880:1011:2fc7:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=63feaee5a253f24b52970d5739b89e362c87ba50">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [<<"fb">>],secret_key_base => nil,state => unset,status => nil},ok],[]},{'Elixir.Agala.Provider.Facebook.Plug',plug_builder_call,2,[{file,"lib/receive/plug.ex"},{line,1}]},{'Elixir.Awe.Bots.Fb',plug_builder_call,2,[{file,"lib/bots/fb.ex"},{line,1}]},{'Elixir.Plug.Router.Utils',forward,4,[{file,"lib/plug/router/utils.ex"},{line,92}]},{'Elixir.Awe.Router',plug_builder_call,2,[{file,"lib/router.ex"},{line,1}]},{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,12}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]}]},{'Elixir.Awe.Router',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 140,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"connection">> => <<"close">>,<<"content-length">> => <<"140">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"Webhooks/1.0 (https://fb.me/webhooks)">>,<<"x-forwarded-for">> => <<"2a03:2880:1011:2fc7:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=63feaee5a253f24b52970d5739b89e362c87ba50">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63785},pid => <0.457.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.458.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"fb">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"connection">>,<<"close">>},{<<"content-length">>,<<"140">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"Webhooks/1.0 (https://fb.me/webhooks)">>},{<<"x-forwarded-for">>,<<"2a03:2880:1011:2fc7:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=63feaee5a253f24b52970d5739b89e362c87ba50">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.457.0>,<0.348.0>,<0.347.0>,<0.346.0>,<0.345.0>]
    message_queue_len: 0
    messages: []
    links: [<0.457.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 4185
    stack_size: 27
    reductions: 4451
  neighbours:
2018-07-07 00:10:05 =ERROR REPORT====
Ranch listener 'Elixir.Awe.Router.HTTP', connection process <0.457.0>, stream 1 had its request process <0.458.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.UndefinedFunctionError',arity => 2,exports => nil,function => response,module => 'Elixir.Agala.Provider.Facebook.Controllers.View',reason => nil},[{'Elixir.Agala.Provider.Facebook.Controllers.View',response,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 140,cert => undefined,has_body => true,has_read_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"connection">> => <<"close">>,<<"content-length">> => <<"140">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"Webhooks/1.0 (https://fb.me/webhooks)">>,<<"x-forwarded-for">> => <<"2a03:2880:1011:2fc7:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=63feaee5a253f24b52970d5739b89e362c87ba50">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63785},pid => <0.457.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.458.0>,params => #{<<"glob">> => []},path_info => [],path_params => #{<<"glob">> => []},port => 80,private => #{agala_bot_config => #{bot => 'Elixir.Awe.Bots.Fb',chain => 'Elixir.Awe.Chains.Fb',otp_app => awe,provider => 'Elixir.Agala.Provider.Facebook',provider_params => #{app_secret => <<"c986ee78f5794c7fcbc77fb98cd429a0">>,page_access_token => <<"EAADSyqlomHgBANcck3bzhk1KBQ0RQYUTkZA2P5XiU8Qi3WiLEQ2HZBJPQZCmpM2nc8EjipppYh8ICsxXlLhydlsfbCSTFzd94XBXgjgjPaiVk2MyTmepeMVMGtK1oPUFIjwsEzEjw3MR8VOtvfBAyHOEIZCZC1VY30zQZC4G0z1kQQ3ZBZCBZBTzS">>,verify_token => <<"111">>}},body => <<"{\"entry\": [{\"changes\": [{\"field\": \"messages\", \"value\": {\"page_id\": \"1067280970047460\"}}], \"id\": \"0\", \"time\": 1530911402}], \"object\": \"page\"}">>,plug_route => {<<"/fb/*glob/*_path">>,#Fun<Elixir.Agala.Provider.Facebook.Plug.1.707427>}},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"connection">>,<<"close">>},{<<"content-length">>,<<"140">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"Webhooks/1.0 (https://fb.me/webhooks)">>},{<<"x-forwarded-for">>,<<"2a03:2880:1011:2fc7:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=63feaee5a253f24b52970d5739b89e362c87ba50">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [<<"fb">>],secret_key_base => nil,state => unset,status => nil},ok],[]},{'Elixir.Agala.Provider.Facebook.Plug',plug_builder_call,2,[{file,"lib/receive/plug.ex"},{line,1}]},{'Elixir.Awe.Bots.Fb',plug_builder_call,2,[{file,"lib/bots/fb.ex"},{line,1}]},{'Elixir.Plug.Router.Utils',forward,4,[{file,"lib/plug/router/utils.ex"},{line,92}]},{'Elixir.Awe.Router',plug_builder_call,2,[{file,"lib/router.ex"},{line,1}]},{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,12}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]}]},{'Elixir.Awe.Router',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 140,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"connection">> => <<"close">>,<<"content-length">> => <<"140">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"Webhooks/1.0 (https://fb.me/webhooks)">>,<<"x-forwarded-for">> => <<"2a03:2880:1011:2fc7:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=63feaee5a253f24b52970d5739b89e362c87ba50">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63785},pid => <0.457.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.458.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"fb">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"connection">>,<<"close">>},{<<"content-length">>,<<"140">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"Webhooks/1.0 (https://fb.me/webhooks)">>},{<<"x-forwarded-for">>,<<"2a03:2880:1011:2fc7:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=63feaee5a253f24b52970d5739b89e362c87ba50">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]
2018-07-07 00:10:13 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.461.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.UndefinedFunctionError',arity => 2,exports => nil,function => response,module => 'Elixir.Agala.Provider.Facebook.Controllers.View',reason => nil},[{'Elixir.Agala.Provider.Facebook.Controllers.View',response,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 321,cert => undefined,has_body => true,has_read_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"deflate, gzip">>,<<"content-length">> => <<"321">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"facebookexternalua">>,<<"x-forwarded-for">> => <<"2a03:2880:1030:4feb:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=8524ead172401354654df896e60a41262c1c9ac6">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63792},pid => <0.460.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.461.0>,params => #{<<"glob">> => []},path_info => [],path_params => #{<<"glob">> => []},port => 80,private => #{agala_bot_config => #{bot => 'Elixir.Awe.Bots.Fb',chain => 'Elixir.Awe.Chains.Fb',otp_app => awe,provider => 'Elixir.Agala.Provider.Facebook',provider_params => #{app_secret => <<"c986ee78f5794c7fcbc77fb98cd429a0">>,page_access_token => <<"EAADSyqlomHgBANcck3bzhk1KBQ0RQYUTkZA2P5XiU8Qi3WiLEQ2HZBJPQZCmpM2nc8EjipppYh8ICsxXlLhydlsfbCSTFzd94XBXgjgjPaiVk2MyTmepeMVMGtK1oPUFIjwsEzEjw3MR8VOtvfBAyHOEIZCZC1VY30zQZC4G0z1kQQ3ZBZCBZBTzS">>,verify_token => <<"111">>}},body => <<"{\"object\":\"page\",\"entry\":[{\"id\":\"730671640616281\",\"time\":1530911412733,\"messaging\":[{\"sender\":{\"id\":\"1468676106567600\"},\"recipient\":{\"id\":\"730671640616281\"},\"timestamp\":1530893475743,\"message\":{\"mid\":\"J97v6JNgKj7-NqXX_Pk0lyGtUuP6avxR5IDQ578-0aIgPv-78yA8-aUUMk0jzhRwJvBGGBi-NxVStT_8FJdkcQ\",\"seq\":2532,\"text\":\"Hello!\"}}]}]}">>,plug_route => {<<"/fb/*glob/*_path">>,#Fun<Elixir.Agala.Provider.Facebook.Plug.1.707427>}},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"deflate, gzip">>},{<<"content-length">>,<<"321">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"facebookexternalua">>},{<<"x-forwarded-for">>,<<"2a03:2880:1030:4feb:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=8524ead172401354654df896e60a41262c1c9ac6">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [<<"fb">>],secret_key_base => nil,state => unset,status => nil},ok],[]},{'Elixir.Agala.Provider.Facebook.Plug',plug_builder_call,2,[{file,"lib/receive/plug.ex"},{line,1}]},{'Elixir.Awe.Bots.Fb',plug_builder_call,2,[{file,"lib/bots/fb.ex"},{line,1}]},{'Elixir.Plug.Router.Utils',forward,4,[{file,"lib/plug/router/utils.ex"},{line,92}]},{'Elixir.Awe.Router',plug_builder_call,2,[{file,"lib/router.ex"},{line,1}]},{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,12}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]}]},{'Elixir.Awe.Router',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 321,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"deflate, gzip">>,<<"content-length">> => <<"321">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"facebookexternalua">>,<<"x-forwarded-for">> => <<"2a03:2880:1030:4feb:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=8524ead172401354654df896e60a41262c1c9ac6">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63792},pid => <0.460.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.461.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"fb">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"deflate, gzip">>},{<<"content-length">>,<<"321">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"facebookexternalua">>},{<<"x-forwarded-for">>,<<"2a03:2880:1030:4feb:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=8524ead172401354654df896e60a41262c1c9ac6">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.460.0>,<0.348.0>,<0.347.0>,<0.346.0>,<0.345.0>]
    message_queue_len: 0
    messages: []
    links: [<0.460.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 6226
  neighbours:
2018-07-07 00:10:13 =ERROR REPORT====
Ranch listener 'Elixir.Awe.Router.HTTP', connection process <0.460.0>, stream 1 had its request process <0.461.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.UndefinedFunctionError',arity => 2,exports => nil,function => response,module => 'Elixir.Agala.Provider.Facebook.Controllers.View',reason => nil},[{'Elixir.Agala.Provider.Facebook.Controllers.View',response,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 321,cert => undefined,has_body => true,has_read_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"deflate, gzip">>,<<"content-length">> => <<"321">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"facebookexternalua">>,<<"x-forwarded-for">> => <<"2a03:2880:1030:4feb:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=8524ead172401354654df896e60a41262c1c9ac6">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63792},pid => <0.460.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.461.0>,params => #{<<"glob">> => []},path_info => [],path_params => #{<<"glob">> => []},port => 80,private => #{agala_bot_config => #{bot => 'Elixir.Awe.Bots.Fb',chain => 'Elixir.Awe.Chains.Fb',otp_app => awe,provider => 'Elixir.Agala.Provider.Facebook',provider_params => #{app_secret => <<"c986ee78f5794c7fcbc77fb98cd429a0">>,page_access_token => <<"EAADSyqlomHgBANcck3bzhk1KBQ0RQYUTkZA2P5XiU8Qi3WiLEQ2HZBJPQZCmpM2nc8EjipppYh8ICsxXlLhydlsfbCSTFzd94XBXgjgjPaiVk2MyTmepeMVMGtK1oPUFIjwsEzEjw3MR8VOtvfBAyHOEIZCZC1VY30zQZC4G0z1kQQ3ZBZCBZBTzS">>,verify_token => <<"111">>}},body => <<"{\"object\":\"page\",\"entry\":[{\"id\":\"730671640616281\",\"time\":1530911412733,\"messaging\":[{\"sender\":{\"id\":\"1468676106567600\"},\"recipient\":{\"id\":\"730671640616281\"},\"timestamp\":1530893475743,\"message\":{\"mid\":\"J97v6JNgKj7-NqXX_Pk0lyGtUuP6avxR5IDQ578-0aIgPv-78yA8-aUUMk0jzhRwJvBGGBi-NxVStT_8FJdkcQ\",\"seq\":2532,\"text\":\"Hello!\"}}]}]}">>,plug_route => {<<"/fb/*glob/*_path">>,#Fun<Elixir.Agala.Provider.Facebook.Plug.1.707427>}},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"deflate, gzip">>},{<<"content-length">>,<<"321">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"facebookexternalua">>},{<<"x-forwarded-for">>,<<"2a03:2880:1030:4feb:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=8524ead172401354654df896e60a41262c1c9ac6">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [<<"fb">>],secret_key_base => nil,state => unset,status => nil},ok],[]},{'Elixir.Agala.Provider.Facebook.Plug',plug_builder_call,2,[{file,"lib/receive/plug.ex"},{line,1}]},{'Elixir.Awe.Bots.Fb',plug_builder_call,2,[{file,"lib/bots/fb.ex"},{line,1}]},{'Elixir.Plug.Router.Utils',forward,4,[{file,"lib/plug/router/utils.ex"},{line,92}]},{'Elixir.Awe.Router',plug_builder_call,2,[{file,"lib/router.ex"},{line,1}]},{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,12}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]}]},{'Elixir.Awe.Router',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 321,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"deflate, gzip">>,<<"content-length">> => <<"321">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"facebookexternalua">>,<<"x-forwarded-for">> => <<"2a03:2880:1030:4feb:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=8524ead172401354654df896e60a41262c1c9ac6">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63792},pid => <0.460.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.461.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"fb">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"deflate, gzip">>},{<<"content-length">>,<<"321">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"facebookexternalua">>},{<<"x-forwarded-for">>,<<"2a03:2880:1030:4feb:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=8524ead172401354654df896e60a41262c1c9ac6">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]
2018-07-07 00:10:40 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.464.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.UndefinedFunctionError',arity => 2,exports => nil,function => response,module => 'Elixir.Agala.Provider.Facebook.Controllers.View',reason => nil},[{'Elixir.Agala.Provider.Facebook.Controllers.View',response,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 140,cert => undefined,has_body => true,has_read_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"connection">> => <<"close">>,<<"content-length">> => <<"140">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"Webhooks/1.0 (https://fb.me/webhooks)">>,<<"x-forwarded-for">> => <<"2a03:2880:1030:afc1:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=63feaee5a253f24b52970d5739b89e362c87ba50">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63798},pid => <0.463.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.464.0>,params => #{<<"glob">> => []},path_info => [],path_params => #{<<"glob">> => []},port => 80,private => #{agala_bot_config => #{bot => 'Elixir.Awe.Bots.Fb',chain => 'Elixir.Awe.Chains.Fb',otp_app => awe,provider => 'Elixir.Agala.Provider.Facebook',provider_params => #{app_secret => <<"c986ee78f5794c7fcbc77fb98cd429a0">>,page_access_token => <<"EAADSyqlomHgBANcck3bzhk1KBQ0RQYUTkZA2P5XiU8Qi3WiLEQ2HZBJPQZCmpM2nc8EjipppYh8ICsxXlLhydlsfbCSTFzd94XBXgjgjPaiVk2MyTmepeMVMGtK1oPUFIjwsEzEjw3MR8VOtvfBAyHOEIZCZC1VY30zQZC4G0z1kQQ3ZBZCBZBTzS">>,verify_token => <<"111">>}},body => <<"{\"entry\": [{\"changes\": [{\"field\": \"messages\", \"value\": {\"page_id\": \"1067280970047460\"}}], \"id\": \"0\", \"time\": 1530911402}], \"object\": \"page\"}">>,plug_route => {<<"/fb/*glob/*_path">>,#Fun<Elixir.Agala.Provider.Facebook.Plug.1.707427>}},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"connection">>,<<"close">>},{<<"content-length">>,<<"140">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"Webhooks/1.0 (https://fb.me/webhooks)">>},{<<"x-forwarded-for">>,<<"2a03:2880:1030:afc1:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=63feaee5a253f24b52970d5739b89e362c87ba50">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [<<"fb">>],secret_key_base => nil,state => unset,status => nil},ok],[]},{'Elixir.Agala.Provider.Facebook.Plug',plug_builder_call,2,[{file,"lib/receive/plug.ex"},{line,1}]},{'Elixir.Awe.Bots.Fb',plug_builder_call,2,[{file,"lib/bots/fb.ex"},{line,1}]},{'Elixir.Plug.Router.Utils',forward,4,[{file,"lib/plug/router/utils.ex"},{line,92}]},{'Elixir.Awe.Router',plug_builder_call,2,[{file,"lib/router.ex"},{line,1}]},{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,12}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]}]},{'Elixir.Awe.Router',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 140,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"connection">> => <<"close">>,<<"content-length">> => <<"140">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"Webhooks/1.0 (https://fb.me/webhooks)">>,<<"x-forwarded-for">> => <<"2a03:2880:1030:afc1:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=63feaee5a253f24b52970d5739b89e362c87ba50">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63798},pid => <0.463.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.464.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"fb">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"connection">>,<<"close">>},{<<"content-length">>,<<"140">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"Webhooks/1.0 (https://fb.me/webhooks)">>},{<<"x-forwarded-for">>,<<"2a03:2880:1030:afc1:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=63feaee5a253f24b52970d5739b89e362c87ba50">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.463.0>,<0.348.0>,<0.347.0>,<0.346.0>,<0.345.0>]
    message_queue_len: 0
    messages: []
    links: [<0.463.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 4185
    stack_size: 27
    reductions: 4451
  neighbours:
2018-07-07 00:10:40 =ERROR REPORT====
Ranch listener 'Elixir.Awe.Router.HTTP', connection process <0.463.0>, stream 1 had its request process <0.464.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.UndefinedFunctionError',arity => 2,exports => nil,function => response,module => 'Elixir.Agala.Provider.Facebook.Controllers.View',reason => nil},[{'Elixir.Agala.Provider.Facebook.Controllers.View',response,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 140,cert => undefined,has_body => true,has_read_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"connection">> => <<"close">>,<<"content-length">> => <<"140">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"Webhooks/1.0 (https://fb.me/webhooks)">>,<<"x-forwarded-for">> => <<"2a03:2880:1030:afc1:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=63feaee5a253f24b52970d5739b89e362c87ba50">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63798},pid => <0.463.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.464.0>,params => #{<<"glob">> => []},path_info => [],path_params => #{<<"glob">> => []},port => 80,private => #{agala_bot_config => #{bot => 'Elixir.Awe.Bots.Fb',chain => 'Elixir.Awe.Chains.Fb',otp_app => awe,provider => 'Elixir.Agala.Provider.Facebook',provider_params => #{app_secret => <<"c986ee78f5794c7fcbc77fb98cd429a0">>,page_access_token => <<"EAADSyqlomHgBANcck3bzhk1KBQ0RQYUTkZA2P5XiU8Qi3WiLEQ2HZBJPQZCmpM2nc8EjipppYh8ICsxXlLhydlsfbCSTFzd94XBXgjgjPaiVk2MyTmepeMVMGtK1oPUFIjwsEzEjw3MR8VOtvfBAyHOEIZCZC1VY30zQZC4G0z1kQQ3ZBZCBZBTzS">>,verify_token => <<"111">>}},body => <<"{\"entry\": [{\"changes\": [{\"field\": \"messages\", \"value\": {\"page_id\": \"1067280970047460\"}}], \"id\": \"0\", \"time\": 1530911402}], \"object\": \"page\"}">>,plug_route => {<<"/fb/*glob/*_path">>,#Fun<Elixir.Agala.Provider.Facebook.Plug.1.707427>}},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"connection">>,<<"close">>},{<<"content-length">>,<<"140">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"Webhooks/1.0 (https://fb.me/webhooks)">>},{<<"x-forwarded-for">>,<<"2a03:2880:1030:afc1:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=63feaee5a253f24b52970d5739b89e362c87ba50">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [<<"fb">>],secret_key_base => nil,state => unset,status => nil},ok],[]},{'Elixir.Agala.Provider.Facebook.Plug',plug_builder_call,2,[{file,"lib/receive/plug.ex"},{line,1}]},{'Elixir.Awe.Bots.Fb',plug_builder_call,2,[{file,"lib/bots/fb.ex"},{line,1}]},{'Elixir.Plug.Router.Utils',forward,4,[{file,"lib/plug/router/utils.ex"},{line,92}]},{'Elixir.Awe.Router',plug_builder_call,2,[{file,"lib/router.ex"},{line,1}]},{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,12}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]}]},{'Elixir.Awe.Router',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 140,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"connection">> => <<"close">>,<<"content-length">> => <<"140">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"224f37ec.ngrok.io">>,<<"user-agent">> => <<"Webhooks/1.0 (https://fb.me/webhooks)">>,<<"x-forwarded-for">> => <<"2a03:2880:1030:afc1:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=63feaee5a253f24b52970d5739b89e362c87ba50">>},host => <<"224f37ec.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},63798},pid => <0.463.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"224f37ec.ngrok.io">>,method => <<"POST">>,owner => <0.464.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"fb">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"connection">>,<<"close">>},{<<"content-length">>,<<"140">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"224f37ec.ngrok.io">>},{<<"user-agent">>,<<"Webhooks/1.0 (https://fb.me/webhooks)">>},{<<"x-forwarded-for">>,<<"2a03:2880:1030:afc1:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=63feaee5a253f24b52970d5739b89e362c87ba50">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]
2018-07-07 00:10:48 =SUPERVISOR REPORT====
     Supervisor: {local,'Elixir.Logger.Supervisor'}
     Context:    child_terminated
     Reason:     normal
     Offender:   [{pid,<0.264.0>},{id,'Elixir.Logger.ErrorHandler'},{mfargs,{'Elixir.Logger.Watcher',start_link,[{error_logger,'Elixir.Logger.ErrorHandler',{true,false,500}}]}},{restart_type,permanent},{shutdown,5000},{child_type,worker}]

2018-07-07 00:12:03 =SUPERVISOR REPORT====
     Supervisor: {local,'Elixir.Logger.Supervisor'}
     Context:    child_terminated
     Reason:     normal
     Offender:   [{pid,<0.256.0>},{id,'Elixir.Logger.ErrorHandler'},{mfargs,{'Elixir.Logger.Watcher',start_link,[{error_logger,'Elixir.Logger.ErrorHandler',{true,false,500}}]}},{restart_type,permanent},{shutdown,5000},{child_type,worker}]

2018-07-09 23:43:20 =SUPERVISOR REPORT====
     Supervisor: {local,'Elixir.Logger.Supervisor'}
     Context:    child_terminated
     Reason:     normal
     Offender:   [{pid,<0.415.0>},{id,'Elixir.Logger.ErrorHandler'},{mfargs,{'Elixir.Logger.Watcher',start_link,[{error_logger,'Elixir.Logger.ErrorHandler',{true,false,500}}]}},{restart_type,permanent},{shutdown,5000},{child_type,worker}]

2018-07-09 23:49:19 =SUPERVISOR REPORT====
     Supervisor: {local,'Elixir.Logger.Supervisor'}
     Context:    child_terminated
     Reason:     normal
     Offender:   [{pid,<0.315.0>},{id,'Elixir.Logger.ErrorHandler'},{mfargs,{'Elixir.Logger.Watcher',start_link,[{error_logger,'Elixir.Logger.ErrorHandler',{true,false,500}}]}},{restart_type,permanent},{shutdown,5000},{child_type,worker}]

2018-07-09 23:50:30 =SUPERVISOR REPORT====
     Supervisor: {local,'Elixir.Logger.Supervisor'}
     Context:    child_terminated
     Reason:     normal
     Offender:   [{pid,<0.315.0>},{id,'Elixir.Logger.ErrorHandler'},{mfargs,{'Elixir.Logger.Watcher',start_link,[{error_logger,'Elixir.Logger.ErrorHandler',{true,false,500}}]}},{restart_type,permanent},{shutdown,5000},{child_type,worker}]

2018-07-09 23:50:41 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.508.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.UndefinedFunctionError',arity => 1,exports => nil,function => call,module => 'Elixir.Awe.Chains.Fb',reason => nil},[{'Elixir.Awe.Chains.Fb',call,[#{'__struct__' => 'Elixir.Agala.Conn',assigns => #{},fallback => nil,halted => false,multi => nil,private => #{},request => <<"{\"entry\": [{\"changes\": [{\"field\": \"messages\", \"value\": {\"page_id\": \"1067280970047460\"}}], \"id\": \"0\", \"time\": 1531169438}], \"object\": \"page\"}">>,request_bot_params => #{bot => 'Elixir.Awe.Bots.Fb',chain => 'Elixir.Awe.Chains.Fb',otp_app => awe,provider => 'Elixir.Agala.Provider.Facebook',provider_params => #{app_secret => <<"c986ee78f5794c7fcbc77fb98cd429a0">>,page_access_tokens => #{agala => <<"EAADSyqlomHgBANcck3bzhk1KBQ0RQYUTkZA2P5XiU8Qi3WiLEQ2HZBJPQZCmpM2nc8EjipppYh8ICsxXlLhydlsfbCSTFzd94XBXgjgjPaiVk2MyTmepeMVMGtK1oPUFIjwsEzEjw3MR8VOtvfBAyHOEIZCZC1VY30zQZC4G0z1kQQ3ZBZCBZBTzS">>},verify_token => <<"111">>}},response => nil,responser_name => nil}],[]},{'Elixir.Agala.Provider.Facebook.Controllers.Callback',handle,1,[{file,"lib/receive/controllers/callback.ex"},{line,10}]},{'Elixir.Agala.Provider.Facebook.Plug',plug_builder_call,2,[{file,"lib/receive/plug.ex"},{line,1}]},{'Elixir.Awe.Bots.Fb',plug_builder_call,2,[{file,"lib/bots/fb.ex"},{line,1}]},{'Elixir.Plug.Router.Utils',forward,4,[{file,"lib/plug/router/utils.ex"},{line,92}]},{'Elixir.Awe.Router',plug_builder_call,2,[{file,"lib/router.ex"},{line,1}]},{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,12}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]}]},{'Elixir.Awe.Router',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 140,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"connection">> => <<"close">>,<<"content-length">> => <<"140">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"bf51661f.ngrok.io">>,<<"user-agent">> => <<"Webhooks/1.0 (https://fb.me/webhooks)">>,<<"x-forwarded-for">> => <<"2a03:2880:2120:1fec:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=e8602206eaee1286bf6dedea43d08c18e5a15b8c">>},host => <<"bf51661f.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},61519},pid => <0.507.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"bf51661f.ngrok.io">>,method => <<"POST">>,owner => <0.508.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"fb">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"connection">>,<<"close">>},{<<"content-length">>,<<"140">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"bf51661f.ngrok.io">>},{<<"user-agent">>,<<"Webhooks/1.0 (https://fb.me/webhooks)">>},{<<"x-forwarded-for">>,<<"2a03:2880:2120:1fec:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=e8602206eaee1286bf6dedea43d08c18e5a15b8c">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]},[{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
    ancestors: [<0.507.0>,<0.401.0>,<0.400.0>,<0.399.0>,<0.398.0>]
    message_queue_len: 0
    messages: []
    links: [<0.507.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 958
  neighbours:
2018-07-09 23:50:42 =ERROR REPORT====
Ranch listener 'Elixir.Awe.Router.HTTP', connection process <0.507.0>, stream 1 had its request process <0.508.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.UndefinedFunctionError',arity => 1,exports => nil,function => call,module => 'Elixir.Awe.Chains.Fb',reason => nil},[{'Elixir.Awe.Chains.Fb',call,[#{'__struct__' => 'Elixir.Agala.Conn',assigns => #{},fallback => nil,halted => false,multi => nil,private => #{},request => <<"{\"entry\": [{\"changes\": [{\"field\": \"messages\", \"value\": {\"page_id\": \"1067280970047460\"}}], \"id\": \"0\", \"time\": 1531169438}], \"object\": \"page\"}">>,request_bot_params => #{bot => 'Elixir.Awe.Bots.Fb',chain => 'Elixir.Awe.Chains.Fb',otp_app => awe,provider => 'Elixir.Agala.Provider.Facebook',provider_params => #{app_secret => <<"c986ee78f5794c7fcbc77fb98cd429a0">>,page_access_tokens => #{agala => <<"EAADSyqlomHgBANcck3bzhk1KBQ0RQYUTkZA2P5XiU8Qi3WiLEQ2HZBJPQZCmpM2nc8EjipppYh8ICsxXlLhydlsfbCSTFzd94XBXgjgjPaiVk2MyTmepeMVMGtK1oPUFIjwsEzEjw3MR8VOtvfBAyHOEIZCZC1VY30zQZC4G0z1kQQ3ZBZCBZBTzS">>},verify_token => <<"111">>}},response => nil,responser_name => nil}],[]},{'Elixir.Agala.Provider.Facebook.Controllers.Callback',handle,1,[{file,"lib/receive/controllers/callback.ex"},{line,10}]},{'Elixir.Agala.Provider.Facebook.Plug',plug_builder_call,2,[{file,"lib/receive/plug.ex"},{line,1}]},{'Elixir.Awe.Bots.Fb',plug_builder_call,2,[{file,"lib/bots/fb.ex"},{line,1}]},{'Elixir.Plug.Router.Utils',forward,4,[{file,"lib/plug/router/utils.ex"},{line,92}]},{'Elixir.Awe.Router',plug_builder_call,2,[{file,"lib/router.ex"},{line,1}]},{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,12}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]}]},{'Elixir.Awe.Router',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Adapters.Cowboy2.Conn',#{bindings => #{},body_length => 140,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"connection">> => <<"close">>,<<"content-length">> => <<"140">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"bf51661f.ngrok.io">>,<<"user-agent">> => <<"Webhooks/1.0 (https://fb.me/webhooks)">>,<<"x-forwarded-for">> => <<"2a03:2880:2120:1fec:face:b00c:0:8000">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-hub-signature">> => <<"sha1=e8602206eaee1286bf6dedea43d08c18e5a15b8c">>},host => <<"bf51661f.ngrok.io">>,host_info => undefined,method => <<"POST">>,path => <<"/fb">>,path_info => undefined,peer => {{127,0,0,1},61519},pid => <0.507.0>,port => 80,qs => <<>>,ref => 'Elixir.Awe.Router.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"bf51661f.ngrok.io">>,method => <<"POST">>,owner => <0.508.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"fb">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"connection">>,<<"close">>},{<<"content-length">>,<<"140">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"bf51661f.ngrok.io">>},{<<"user-agent">>,<<"Webhooks/1.0 (https://fb.me/webhooks)">>},{<<"x-forwarded-for">>,<<"2a03:2880:2120:1fec:face:b00c:0:8000">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-hub-signature">>,<<"sha1=e8602206eaee1286bf6dedea43d08c18e5a15b8c">>}],request_path => <<"/fb">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Plug.Adapters.Cowboy2.Handler',init,2,[{file,"lib/plug/adapters/cowboy2/handler.ex"},{line,20}]},{cowboy_handler,execute,2,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_handler.erl"},{line,37}]},{cowboy_stream_h,execute,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,274}]},{cowboy_stream_h,request_process,3,[{file,"/Users/virviil/dev/agala/agala_webhooks_examples/deps/cowboy/src/cowboy_stream_h.erl"},{line,252}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]
2018-07-09 23:50:56 =SUPERVISOR REPORT====
     Supervisor: {local,'Elixir.Logger.Supervisor'}
     Context:    child_terminated
     Reason:     normal
     Offender:   [{pid,<0.315.0>},{id,'Elixir.Logger.ErrorHandler'},{mfargs,{'Elixir.Logger.Watcher',start_link,[{error_logger,'Elixir.Logger.ErrorHandler',{true,false,500}}]}},{restart_type,permanent},{shutdown,5000},{child_type,worker}]

